---
title: hmrIntegration
description: Enable hot module reloading for your integration during development.
---

import { Steps } from '@astrojs/starlight/components';

`hmrIntegration` enables hot module reloading (HMR) for your integration during development. It watches a specified directory and triggers Astro dev server reloads when files change, making development faster and more efficient.

## How it works

`hmrIntegration` uses [`watchDirectory`](/utilities/watch-directory/) internally to monitor file changes in your integration's build output directory. When files change, it automatically reloads the Astro dev server, allowing you to see changes immediately without manual restarts.

## Usage

<Steps>

1. **Import the required functions**

   Import `hmrIntegration` and `importFresh` from `astro-integration-kit/dev` in your playground's Astro config:

   ```ts title="playground/astro.config.mjs"
   import { defineConfig } from "astro/config";
   import { createResolver } from "astro-integration-kit";
   import { hmrIntegration, importFresh } from "astro-integration-kit/dev";
   ```

2. **Use importFresh for your integration**

   Use [`importFresh`](/dev/import-fresh/) to load your integration with cache busting for proper HMR:

   ```ts title="playground/astro.config.mjs"
   import { importFresh } from "astro-integration-kit/dev";
   
   const myIntegration = await importFresh("my-integration");
   ```

3. **Add hmrIntegration to your config**

   Configure `hmrIntegration` to watch your integration's build output directory. You can watch a single directory or multiple directories:

   ```ts title="playground/astro.config.mjs"
   export default defineConfig({
       integrations: [
           myIntegration(),
           // Watch a single directory
           hmrIntegration({
                directory: createResolver(import.meta.url).resolve("../package/dist")
           })
           // Or watch multiple directories
            hmrIntegration({
                directories: [
                    createResolver(import.meta.url).resolve("../package/dist"),
                    createResolver(import.meta.url).resolve("../other-package/dist")
                ]
           })
       ],
   });
   ```

</Steps>

## Complete example

```ts title="playground/astro.config.mjs"
import { defineConfig } from "astro/config";
import { createResolver } from "astro-integration-kit";
import { hmrIntegration, importFresh } from "astro-integration-kit/dev";

// Use importFresh for proper cache busting in Astro 5+
const myIntegration = await importFresh("my-integration");

export default defineConfig({
    integrations: [
        myIntegration(),
        hmrIntegration({
            directory: createResolver(import.meta.url).resolve("../package/dist")
        })
    ],
});
```

## Options

Choose one of the following options:

- **`directory`**: A single directory to watch for file changes, typically your integration's build output directory
- **`directories`**: An array of directories to watch for file changes when you need to monitor multiple locations
