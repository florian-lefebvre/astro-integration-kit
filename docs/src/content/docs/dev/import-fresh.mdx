---
title: importFresh
description: Import packages with cache busting for proper HMR during development.
---

import { Steps } from '@astrojs/starlight/components';

`importFresh` imports packages with cache busting for proper HMR during development. Since [This PR in Astro v5](https://github.com/withastro/astro/pull/11819), bare specifiers are loaded through Node instead of Vite, so they don't refresh when the dev server restarts.

## When to use it

**Use `importFresh` for:**
- Package names in `astro.config.mjs` only (e.g., `"my-integration"`)
- In the playground of your integration

**Don't use `importFresh` for:**
- Relative imports - Vite handles these properly
- Anywhere other than `astro.config.*` 
- In production builds - it is only for playground development 

## How it works

`importFresh` resolves the package path, adds a timestamp query parameter to bust the Node.js module cache, and imports the fresh module.

## Usage

<Steps>

1. **Import the function**

   Import `importFresh` from `astro-integration-kit/dev` in your Astro config:

   ```ts title="playground/astro.config.mjs"
   import { defineConfig } from "astro/config";
   import { importFresh } from "astro-integration-kit/dev";
   ```

2. **Use it for package imports**

   Replace regular imports with `importFresh` for your integration packages:

   ```ts title="playground/astro.config.mjs"
   // Use importFresh for bare specifiers
   const myIntegration = await importFresh("my-integration");
   
   export default defineConfig({
       integrations: [myIntegration()]
   });
   ```

</Steps>

## Complete example

```ts title="playground/astro.config.mjs"
import { defineConfig } from "astro/config";
import { createResolver } from "astro-integration-kit";
import { importFresh, hmrIntegration } from "astro-integration-kit/dev";

// Use importFresh for package names to ensure fresh imports
const myIntegration = await importFresh("my-integration");

export default defineConfig({
    integrations: [
        myIntegration(),
        hmrIntegration({
            directory: createResolver(import.meta.url).resolve("../package/dist")
        })
    ],
});
```