---
title: importFresh
description: Import packages with cache busting for proper HMR during development.
---


`importFresh` imports packages with cache-busting so they reload properly during development. Since [this Astro v5 change](https://github.com/withastro/astro/pull/11819), linked packages are loaded through Node instead of Vite, so they don't automatically refresh when the dev server restarts. `importFresh` fixes that by forcing a fresh import.

## When to use it

**Use `importFresh` for:**
- All [bare specifiers](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import) of your package across the playground (e.g., `"my-integration"`, `"my-integration/sub-package"`).

**Don't use `importFresh` for:**
- Scenarios where you're certain your package will be loaded through Vite.
- **Production builds** â€” it's for local development only.

## How it works

`importFresh` resolves the package path, appends a timestamp query (`?t=<ms>`) to bust Node's module cache, and dynamically imports the module. It returns the module's default export if present, otherwise the module namespace.

## Example

```ts title="playground/astro.config.mjs"
import { defineConfig } from "astro/config";
import { createResolver } from "astro-integration-kit";
import { importFresh } from "astro-integration-kit/dev";

const { default: myIntegrationModule } = await importFresh<
  typeof import("my-integration")
>("my-integration");


export default defineConfig({
  integrations: [
    myIntegration(),
    hmrIntegration({ directory: "../package/dist" })
  ],
});
```
