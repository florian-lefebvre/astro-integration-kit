---
title: watchIntegration
description: In development, will reload the Astro dev server if any files within the integration directory has changed. Must be called inside `astro:config:setup`.
---
import { Tabs, TabItem } from '@astrojs/starlight/components';

In development, `watchIntegration` will reload the Astro dev server if any files within
the integration directory has changed. It must be called inside `astro:config:setup`:

<Tabs>
    <TabItem label="All-in">
	```ts title="my-integration/index.ts"
	import { createResolver, defineIntegration, watchIntegration } from "astro-integration-kit";
	import { z } from "astro/zod"

	export default defineIntegration({
		name: "my-integration",
		options: z.object({
			foo: z.string().optional().default("bar")
		}).default({ foo: "bar" }),
		setup(options) {
			const { resolve } = createResolver(import.meta.url);

			return {
				"astro:config:setup": async () => {
					await watchIntegration(resolve())
				}
			}
		}
	})
	```
	</TabItem>
	<TabItem label="Vanilla">
	```ts title="integration/index.ts"
	import type { AstroIntegration } from "astro";
	import { createResolver, watchIntegration } from "astro-integration-kit";

	export default function myIntegration(): AstroIntegration {
		const { resolve } = createResolver(import.meta.url);

		return {
			name: "my-integration",
			hooks: {
				"astro:config:setup": async ({ addWatchFile, command, updateConfig }) => {
					await watchIntegration({
						addWatchFile,
						command,
						dir: resolve(),
						updateConfig,
					});
				},
			}
		}
	}
	``` 
	</TabItem>
</Tabs>